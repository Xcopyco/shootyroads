<!DOCTYPE html>
<html>
	<head>
	<meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height" />
		<title>Shooty Roads</title>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bigfishtv-turret/4.0.0/turret.min.css" crossorigin="anonymous">
		<link rel="stylesheet" type="text/css" href="css/main.css" />
	</head>

	<!-- SockJS library used for the Real-time WebSocket connection for multiplayer -->
	<script src="https://cdn.jsdelivr.net/sockjs/1/sockjs.min.js"></script>

	<!-- External Libraries -->

	<!-- Zepto.js used for jQuery like features, without all the weight -->
	<script src="lib/zepto.min.js"></script>

	<!-- moment.js used for formating dates -->
	<script src="lib/moment.min.js"></script>

	<!-- underscore.js used for simple utility for data manipulation -->
	<script src="lib/underscore.min.js"></script>

	<!-- Knockout.js used for the game ui -->
	<script src="lib/knockout-3.4.2.js"></script>

	<!-- Core JS Scripts -->

	<!-- Constant scripts -->
	<script src="js/constants.js"></script>
	<script src="js/messages.js"></script>

	<!-- Network and Utility scripts -->
	<script src="js/utils.js"></script>
	<script src="js/network.js"></script>

	<!-- Game object scripts -->
	<script src="js/character.js"></script>
	<script src="js/enemy.js"></script>
	<script src="js/bullet.js"></script>
	<script src="js/particle.js"></script>

	<!-- UI and ViewModel script -->
	<script src="js/app.js"></script>

	<!-- Core Game Computation script -->
	<script src="js/game.js"></script>

	<body>
		<canvas
			data-bind="visible: currentState() == states.GAME"
			class="game"
			id="game">
		</canvas>

		<!-- ko if: currentState() != states.GAME -->
		<div
			data-bind="html: buildHtml"
			class="build-item">
		</div>

		<div class="title">
			Shooty<br />
			Roads
		</div>
		<!-- /ko -->

		<!-- ko if: currentState() == states.MAIN_MENU -->
		<div class="item">
			<button
				data-bind="click: singlePlayer"
				class="button button-primary">
				Single Player
			</button>
			<button
				data-bind="click: multiplayer"
				class="button button-primary">
				Multiplayer
			</button>
			<button
				class="button button-primary">
				Instructions
			</button>
		</div>
		<!-- /ko -->

		<!-- ko if: currentState() == states.MULTIPLAYER -->
		<div class="item">
			<button
				data-bind="click: hostGame"
				class="button button-primary">
				Host Game
			</button>
			<button
				data-bind="click: joinGame"
				class="button button-primary">
				Join Game
			</button>
		</div>
		<!-- /ko -->

		<!-- ko if: currentState() == states.GAME_OVER -->
		<div class="item">
			<button class="m-item">
				<span id="score"></span>
			</button>
			<button
				data-bind="click: home"
				class="button button-primary">
				Home
			</button>
			<button
				data-bind="click: replay"
				class="button button-primary">
				Replay
			</button>
		</div>
		<!-- /ko -->

		<!-- ko if: currentState() == states.HOSTING_SETUP -->
		<div class="item">
			<input
			 	data-bind="value: serverName"
				class="button button-primary"
				type="text"
				placeholder="Your name...">
			</input>
			<button
				data-bind="text: 'Room name: ' + roomName()"
				class="button button-primary">
			</button>
			<button
				data-bind="click: startHosting"
				class="button button-primary">
				Start Hosting...
			</button>
			<button
				class="button button-primary">
				Cancel
			</button>
		</div>
		<!-- /ko -->

		<!-- ko if: currentState() == states.HOST_WAITING -->
		<div class="item">
			<button
				data-bind="text: serverName"
				class="button button-primary">
			</button>
			<button
				data-bind="text: 'Room name: ' + roomName()"
				class="button button-primary">
			</button>
			<button class="button button-primary">
				Waiting for a player to join...
			</button>
			<button class="button button-primary">
				Cancel
			</button>
		</div>
		<!-- /ko -->

		<!-- ko if: currentState() == states.HOST_READY -->
		<div class="item">
			<button
				data-bind="text: serverName"
				class="button button-primary">
			</button>
			<button
				data-bind="text: 'Room name: ' + roomName()"
				class="button button-primary">
			</button>
			<button
				data-bind="text: clientName() + ' has joined!'"
				class="button button-primary">
			</button>
			<button
			 	data-bind="click: hostStartGame"
				class="button button-primary">
				Start Game!
			</button>
			<button class="button button-primary">
				Cancel
			</button>
		</div>
		<!-- /ko -->

		<!-- ko if: currentState() == states.JOINING -->
		<div class="item">
			<input
			 	data-bind="value: clientName"
				type="text"
				placeholder="Your name..."></input>
			<input
				data-bind="value: roomName"
				type="text"
				placeholder="Room name..."></input>
			<button
			 	data-bind="click: joiningGame"
				class="button button-primary">
				Join Room
			</button>
			<button class="button button-primary">
				Cancel
			</button>
		</div>
		<!-- /ko -->

		<!-- ko if: currentState() == states.JOIN_WAITING -->
		<div class="item">
			<button
				data-bind="text: clientName"
				class="button button-primary">
			</button>
			<button
				data-bind="text: serverName() + ' is hosting ' + roomName()"
				class="button button-primary">
			</button>
			<button
				data-bind="text: 'Waiting on ' + serverName() + ' to start the game...'"
				class="button button-primary">
			</button>
			<button class="button button-primary">
				Cancel
			</button>
		</div>
		<!-- /ko -->

	</body>
</html>
